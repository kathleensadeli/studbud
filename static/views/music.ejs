<!DOCTYPE html>
<html lang="en">

<head>
    <%- include('./partials/head') %>
</head>

<body>
    <section class="wrapper">
        <%- include('./partials/menu'); %>
        <section class="content-wrapper">
            <header>
                <div class="menu-bar" id="menu-bar"><i class="fa-solid fa-bars fa-2x"></i></div>
                <div>
                    <h1>MUSIC</h1>
                </div>
            </header>

            <section class="content music">
                <!-- Looping track list to make track card for song -->
                <% trackList.forEach(function(track) { %>
                <div class="music-cards" onclick="selectCurrentSong('<%= track.id %>')">
                    <img src="<%= track.image %>" >
                    <div class="music-track bold"><%= track.name %></div>
                    <div class="music-artist"><%= track.artist %></div>
                    <input type="hidden" value="<%= track.id %>">
                </div>
                <% }) %>
            </section>
            <!-- Include partials from EJS Mobile Playlist and menu -->
            <%- include('./partials/mobileplaylist'); %>
            <%- include('./partials/mobilemenu'); %>
        </section>
    </section>

    <script>

        //Function to play current song on click
        function selectCurrentSong(index){
            songIndex=index-1;
            let width = screen.width;
            if(width<=450){
                loadSongMobile(trackList[songIndex]);
                playSongMobile();
            }else{
                loadSong(trackList[songIndex]);
                playSong();
            }
            
        }
    </script>
</body>

</html>