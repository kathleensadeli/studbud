<aside class="menu primary1">
    <div>
        <ul>
            <li class="bold">
                <div>CONTENT</div>
            </li>
            <li class="<%= title=='Task List' ? 'menu-active' : '' %>">
                <a href="/" class="menu-activesewew">Task List</a>
            </li>
            <li class="<%= title=='Bookmark' ? 'menu-active' : '' %>">
                <a href="/bookmarks">Bookmarks</a>
            </li>
        </ul>
        <br>
        <ul>
            <lI class="bold">
                <div>ACCESSORIES</div>
            </lI>
            <li class="<%= title=='Clock' ? 'menu-active' : '' %>">
                <a href="/clock">Clock</a>
            </li>
            <li class="<%= title=='Music' ? 'menu-active' : '' %>">
                <a href="/music">Music</a>
            </li>
        </ul>
    </div>
    

    <div class="music-container" id="music-container">
      <div class="music-info">
        <img src="static/musics/images/niki1.png" alt="music-cover" id="cover" />
        <div class="song-detail">
          <div id="title" class="bold"></div>
          <div id="artist">Niki</div>
        </div>
      </div>
      <div class="progress-container" id="progress-container">
        <div class="progress" id="progress"></div>
      </div>

      <audio src="static/musics/indigo.mp3" id="audio"></audio>

      <div class="navigation">
        <div id="prev" class="action-btn">
          <i class="fa-solid fa-backward-step fa-2x"></i>
        </div>
        <div id="play" class="action-btn">
          <i class="fa-solid fa-circle-play fa-2x"></i>
        </div>
        <div id="next" class="action-btn">
          <i class="fa-solid fa-forward-step fa-2x"></i>
        </div>
      </div>
    </div>
    

    
<script>
  
  const trackList=[{
      id:1,
      name:"Indigo",
      artist:"Niki",
      image:"static/musics/images/niki1.png",
      path:"static/musics/indigo.mp3"
  },{
      id:2,
      name:"Shivers",
      artist:"Ed Sheeran",
      image:"static/musics/images/edsheeran1.png",
      path:"static/musics/shivers.mp3"
  },{
      id:3,
      name:"Leave Your Life",
      artist:"Ed Sheeran",
      image:"static/musics/images/edsheeran1.png",
      path:"static/musics/leaveyourlife.mp3"
  },{
      id:4,
      name:"Stop The Rain",
      artist:"Ed Sheeran",
      image:"static/musics/images/edsheeran1.png",
      path:"static/musics/stoptherain.mp3"
  },{
      id:5,
      name:"Perfect",
      artist:"Ed Sheeran",
      image:"static/musics/images/edsheeran2.png",
      path:"static/musics/perfect.mp3"
  },{
      id:6,
      name:"Bad Habits",
      artist:"Ed Sheeran",
      image:"static/musics/images/edsheeran1.png",
      path:"static/musics/badhabits.mp3"
  },{
      id:7,
      name:"Willow",
      artist:"Taylor Swift",
      image:"static/musics/images/taylor1.png",
      path:"static/musics/willow.mp3"
  },{
      id:8,
      name:"Positions",
      artist:"Arianna Grande",
      image:"static/musics/images/arianna1.png",
      path:"static/musics/positions.mp3"
  },{
      id:9,
      name:"Closure",
      artist:"Taylor Swift",
      image:"static/musics/images/taylor1.png",
      path:"static/musics/closure.mp3"
  },{
      id:10,
      name:"Visiting Hours",
      artist:"Ed Sheeran",
      image:"static/musics/images/edsheeran1.png",
      path:"static/musics/visitinghours.mp3"
  },{
      id:11,
      name:"Shape of You",
      artist:"Ed Sheeran",
      image:"static/musics/images/edsheeran2.png",
      path:"static/musics/shapeofyou.mp3"
  },{
      id:12,
      name:"Gold Rush",
      artist:"Taylor Swift",
      image:"static/musics/images/taylor1.png",
      path:"static/musics/goldrush.mp3"
  },{
      id:13,
      name:"Test Drive",
      artist:"Arianna Grande",
      image:"static/musics/images/arianna1.png",
      path:"static/musics/testdrive.mp3"
  },{
      id:14,
      name:"Majorie",
      artist:"Taylor Swift",
      image:"static/musics/images/taylor1.png",
      path:"static/musics/majorie.mp3"
  },{
      id:15,
      name:"Galway Girl",
      artist:"Ed Sheeran",
      image:"static/musics/images/edsheeran2.png",
      path:"static/musics/galwaygirl.mp3"
  }];
  
  const musicContainer = document.getElementById('music-container');
  const playBtn = document.getElementById('play');
  const prevBtn = document.getElementById('prev');
  const nextBtn = document.getElementById('next');
  
  const audio = document.getElementById('audio');
  const progress = document.getElementById('progress');
  const progressContainer = document.getElementById('progress-container');
  const title = document.getElementById('title');
  const artist = document.getElementById('artist');
  const cover = document.getElementById('cover');
  // const currTime = document.querySelector('#currTime');
  // const durTime = document.querySelector('#durTime');
  
  // Song titles
  const songs = ['indigo', 'perfect', 'galwaygirl'];
  
  // Keep track of song
  let songIndex = 0;
  
  // Initially load song details into DOM
  loadSong(trackList[songIndex]);
  
  // Update song details
  function loadSong(song) {
    title.innerText = song.name;
    artist.innerText = song.artist;
    audio.src = song.path;
    cover.src = song.image;
  }
  
  // Play song
  function playSong() {
    musicContainer.classList.add('play');
    playBtn.querySelector('i.fa-solid').classList.remove('fa-circle-play');
    playBtn.querySelector('i.fa-solid').classList.add('fa-circle-pause');
    audio.play();
  }
  
  // Pause song
  function pauseSong() {
    musicContainer.classList.remove('play');
    playBtn.querySelector('i.fa-solid').classList.add('fa-circle-play');
    playBtn.querySelector('i.fa-solid').classList.remove('fa-circle-pause');
  
    audio.pause();
  }
  
  // Previous song
  function prevSong() {
    songIndex--;
  
    if (songIndex < 0) {
      songIndex = trackList.length - 1;
    }
  
    loadSong(trackList[songIndex]);
  
    playSong();
  }
  
  // Next song
  function nextSong() {
    songIndex++;
  
    if (songIndex > trackList.length - 1) {
      songIndex = 0;
    }
  
    loadSong(trackList[songIndex]);
  
    playSong();
  }
  
  // Update progress bar
  function updateProgress(e) {
    const { duration, currentTime } = e.srcElement;
    const progressPercent = (currentTime / duration) * 100;
    progress.style.width = `${progressPercent}%`;
  }
  
  // Set progress bar
  function setProgress(e) {
    const width = this.clientWidth;
    const clickX = e.offsetX;
    const duration = audio.duration;
  
    audio.currentTime = (clickX / width) * duration;
  }
  
  //get duration & currentTime for Time of song
  function DurTime (e) {
      const {duration,currentTime} = e.srcElement;
      var sec;
      var sec_d;
  
      // define minutes currentTime
      let min = (currentTime==null)? 0:
       Math.floor(currentTime/60);
       min = min <10 ? '0'+min:min;
  
      // define seconds currentTime
      function get_sec (x) {
          if(Math.floor(x) >= 60){
              
              for (var i = 1; i<=60; i++){
                  if(Math.floor(x)>=(60*i) && Math.floor(x)<(60*(i+1))) {
                      sec = Math.floor(x) - (60*i);
                      sec = sec <10 ? '0'+sec:sec;
                  }
              }
          }else{
               sec = Math.floor(x);
               sec = sec <10 ? '0'+sec:sec;
           }
      } 
  
      get_sec (currentTime,sec);
  
      // change currentTime DOM
      // currTime.innerHTML = min +':'+ sec;
  
      // define minutes duration
      let min_d = (isNaN(duration) === true)? '0':
          Math.floor(duration/60);
       min_d = min_d <10 ? '0'+min_d:min_d;
  
  
       function get_sec_d (x) {
          if(Math.floor(x) >= 60){
              
              for (var i = 1; i<=60; i++){
                  if(Math.floor(x)>=(60*i) && Math.floor(x)<(60*(i+1))) {
                      sec_d = Math.floor(x) - (60*i);
                      sec_d = sec_d <10 ? '0'+sec_d:sec_d;
                  }
              }
          }else{
               sec_d = (isNaN(duration) === true)? '0':
               Math.floor(x);
               sec_d = sec_d <10 ? '0'+sec_d:sec_d;
           }
      } 
  
      // define seconds duration
      
      get_sec_d (duration);
  
      // change duration DOM
      // durTime.innerHTML = min_d +':'+ sec_d;
          
  };
  
  // Event listeners
  playBtn.addEventListener('click', () => {
    const isPlaying = musicContainer.classList.contains('play');
  
    if (isPlaying) {
      pauseSong();
    } else {
      playSong();
    }
  });
  
  // Change song
  prevBtn.addEventListener('click', prevSong);
  nextBtn.addEventListener('click', nextSong);
  
  // Time/song update
  audio.addEventListener('timeupdate', updateProgress);
  
  // Click on progress bar
  progressContainer.addEventListener('click', setProgress);
  
  // Song ends
  audio.addEventListener('ended', nextSong);
  
  // Time of song
  audio.addEventListener('timeupdate',DurTime);
  
  </script>
</aside>
